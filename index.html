<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Business Impacts of COVID-19</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&display=swap" rel="stylesheet">

    <!-- Load d3.js -->
    <script src="https://d3js.org/d3.v4.js"></script>

    <!-- Load color scale -->
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body>

    <div class="container">
      <div class="row">

        <main role="main" class="col-md-9 ml-sm-auto col-lg-12 pt-3 px-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
            <h1 class="h2">Business Impacts of COVID-19</h1>
            <div class="btn-toolbar mb-2 mb-md-0">
              <div class="btn-group mr-2">
                <button class="btn btn-sm btn-outline-secondary">Share</button>
                <button class="btn btn-sm btn-outline-secondary">Export</button>
              </div>
            </div>
          </div>
          <h6>Data released 7th May 2020</h6>
          <div class="row">
            <div class="col-lg-6">
              <p style="text-align: justify">The indicators and analysis presented are based on responses from a voluntary
              fortnightly business survey, which captures businesses' responses on how their turnover, workforce prices,
              trade and business resilience have been affected in the two week reference period. These data relate to the
              period 6 April 2020 to 19 April 2020.</p>
            </div>
            <div class="col-lg-6">
              <p style="text-align: justify">Estimates from the Business Impact of Coronavirus (COVID-19) Survey (BICS) are currently unweighted and
              should be treated with caution when used to evaluate the impact of COVID-19 across the UK economy.
              Each business was assigned the same weight regardless of turnover, size or industry, and the data in the
              latest period are final.</p>
            </div>
          </div>

          <div class="card">
            <h4 class="card-header">Survey Information</h4>
            <div class="card-body">
              <p class="card-text" style="text-align: justify">The survey was sent to around 17,600 UK businesses, and results are based on a limited number of responses, around 34.7% (6,114) of all businesses surveyed who responded.</p>
              <div class="row">
                <div class="col-lg-6">
                  <h5>Responses Across Different Workforce Sizes in Industry</h5>
                  <div id="responses-bubble"></div>
                </div>
                <div class="col-lg-6">
                  <div class="row">
                    <div class="col">
                      <h5>Total Responses Received</h5>
                    </div>
                    <div class="col">
                      <select class="form-select" aria-label="Default select example" onchange="updateData(this.value)">
                        <option selected value="industry" onclick="update(data1)">Industry</option>
                        <option value="workforce" onclick="update(data2)">Workforce Size</option>
                      </select>
                    </div>
                  </div>
                  <!-- Add 2 buttons -->
<!--                  <button onclick="update(data1)">Variable 1</button>-->
<!--                  <button onclick="update(data2)">Variable 2</button>-->
                  <div id="responses-bar"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">

            <div class="col-lg-12">
              <div class="card">
                <h4 class="card-header">Trading Status</h4>
                <div class="card-body">
                  <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                  <a href="#" class="btn btn-primary">Go somewhere</a>
                </div>
              </div>
            </div>

          </div>

          <div class="card">
            <h4 class="card-header">Government Schemes</h4>
            <div class="card-header">
              <ul class="nav nav-tabs card-header-tabs">
                <li class="nav-item">
                  <a class="nav-link active" href="#">All</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">Job Retention Scheme</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="#">SmthSmth Scheme</a>
                </li>
              </ul>
            </div>
            <div class="card-body">
              <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
              <a href="#" class="btn btn-primary">Go somewhere</a>
            </div>
          </div>

        </main>
      </div>
    </div>


    <!--Bootstrap JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <!--Graphs-->
    <script src="assets/js/responses-bubble-chart.js"></script>
    <script src="assets/js/responses-bar-chart.js"></script>
    <script>
      function updateData(type){
        if (type == "") return;

        if (type == "industry"){
          update(data1)
        }
        else{
          update(data2)
        }
      }
    </script>

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.1/ScrollTrigger.min.js"></script>
    <script>
      const cards = gsap.utils.toArray('.card');

      // Set things up
      gsap.set(cards, {autoAlpha: 0, y: 50});

      cards.forEach((card, i) => {
        // Set up your animation
        const anim = gsap.to(card, {duration: 1, autoAlpha: 1, y: 0, paused: true});

        // Use callbacks to control the state of the animation
        ScrollTrigger.create({
          trigger: card,
          end: "bottom bottom",
          once: true,
          onEnter: self => {
            // If it's scrolled past, set the state
            // If it's scrolled to, play it
            self.progress === 1 ? anim.progress(1) : anim.play()
          }
        });
      });
    </script>
</body>
</html>